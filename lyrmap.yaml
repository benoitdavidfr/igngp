title: carte Leaflet affichant une couche ftsmap
$schema: llmap
head:
  title: "<?php echo $title;?>"
  plugIns:
    - {$ref: llmap.yaml#/plugIns/Control.Coordinates/include}
    - {$ref: llmap.yaml#/plugIns/edgebuffer/include}
    - |
      <!-- Include the Control.Coordinates plugin -->
      <link rel='stylesheet' href='https://geoapi.fr/shomgt/leaflet/Control.Coordinates.css'>
      <script src='https://geoapi.fr/shomgt/leaflet/Control.Coordinates.js'></script>
    - |
      <!-- Include the uGeoJSON plugin -->
      <script src="https://geoapi.fr/shomgt/leaflet/leaflet.uGeoJSON.js"></script>
    - |
      <!-- plug-in d'appel des GeoJSON en AJAX -->
      <script src='https://geoapi.fr/shomgt/leaflet/leaflet-ajax.js'></script>
body:
  jsFunctions: |
    // affichage des caractéristiques de chaque feature
    var onEachFeature = function (feature, layer) {
      var popupContent = '<pre><u><i>id</i></u>: '+feature.id+"\\n";
      popupContent += '<u><i>'+'properties</i></u>: '+JSON.stringify(feature.properties)+"\\n";
      popupContent += '</ul>';
      layer.bindPopup(popupContent);
      layer.bindTooltip(feature.id);
    }
  view:
    latLon: [46.5, 3]
    zoom: 6
  plugInActivation:
    - {$ref: llmap.yaml#/plugIns/Control.Coordinates/activation}
  baseLayers:
    Plan IGN:
      type: L.TileLayer
      params:
        - 'https://igngp.geoapi.fr/tile.php/plan-ignv2/{z}/{x}/{y}.png'
        - format: image/png
          minZoom: 0
          maxZoom: 18
          detectRetina: false
          attribution: "&copy; <a href='http://www.ign.fr' target='_blank'>IGN</a>"
    OSM:
      type: L.TileLayer
      params:
        - 'http://{s}.tile.osm.org/{z}/{x}/{y}.png'
        - attribution: "&copy; <a href='https://www.openstreetmap.org/copyright' target='_blank'>les contributeurs d’OpenStreetMap</a>"
    Fond blanc:
      type: L.TileLayer
      params:
        - 'https://visu.gexplor.fr/utilityserver.php/whiteimg/{z}/{x}/{y}.jpg'
        - format: 'image/jpeg'
          minZoom: 0
          maxZoom: 21
          detectRetina: false
  defaultBaseLayer: Plan IGN
  overlays:
    "<?php echo $collId;?>":
      type: L.GeoJSON.AJAX
      params:
        - '<?php echo $collUrl;?>'
        - {style: { color: 'blue'}, minZoom: 0, maxZoom: 18, onEachFeature: {$function: onEachFeature}}
    UGeoJSONLayer:
      type: L.UGeoJSONLayer
      params:
        - endpoint: '<?php echo $collUrl0;?>'
          minZoom: 0
          maxZoom: 18
          usebbox: true
          onEachFeature: {$function: onEachFeature}
    debug:
      type: L.TileLayer
      params:
        - 'http://visu.gexplor.fr/utilityserver.php/debug/{z}/{x}/{y}.png'
        - {"format": "image/png","minZoom": 0,"maxZoom": 21,"detectRetina": false}
